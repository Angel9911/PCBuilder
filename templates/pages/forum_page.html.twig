{% extends 'base.html.twig' %}

{% block title %}Forum{% endblock %}

{% block content %}
    <div class="max-w-7xl mx-auto px-4 py-10 space-y-10">
        {% for section in sections %}
            <div>
                <h2 class="text-2xl font-bold text-blue-800 mb-4">{{ section.title }}</h2>

                <div class="space-y-6">
                    {% for category in section.subSections %}
                        <div>
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">{{ category.title }}</h3>
                            <div class="space-y-4">
                                {% for topic in category.topics %}
                                    <a href="{{ path('forum_topic_details', { 'topicId':  topic.id}) }}"
                                       class="block bg-white p-5 rounded-xl shadow hover:shadow-md transition cursor-pointer">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-base font-semibold text-blue-700 hover:underline">
                                                    {{ topic.title }}
                                                </h4>
                                                <p class="text-sm text-gray-600 mt-1">
                                                    Публикувано от
                                                    <span class="font-medium text-gray-800">{{ topic.user.account.username }}</span> ·
                                                    {{ topic.createdAt|date('d.m.Y') }}
                                                </p>
                                            </div>
                                        <span class="bg-gray-100 text-sm px-3 py-1 rounded-full text-gray-700">
                                            {{ topic.comments|length }} отговора
                                         </span>
                                        </div>
                                    </a>
                                {% endfor %}
                            </div>

                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}